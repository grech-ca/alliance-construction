datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Admin {
  id       Int    @id @default(autoincrement())
  name     String
  email    String
  password String
}

model File {
  id   Int   @id @default(autoincrement())
  data Bytes
}

model Photo {
  id                 Int               @id @default(autoincrement())
  url                String
  project            Project?          @relation(fields: [projectId], references: [id])
  projectId          Int?
  portfolioProject   PortfolioProject? @relation(fields: [portfolioProjectId], references: [id])
  portfolioProjectId Int?
  layout             Layout?           @relation(fields: [layoutId], references: [id])
  layoutId           Int?
  resource           Resource?         @relation(fields: [resourceId], references: [id])
  resourceId         Int?
}

model Resource {
  id            Int                 @id @default(autoincrement())
  projects      Project[]
  name          String
  advantages    ResourceAdvantage[]
  resourcePhoto Photo[]
}

model ResourceAdvantage {
  id         Int       @id @default(autoincrement())
  text       String
  Resource   Resource? @relation(fields: [resourceId], references: [id])
  resourceId Int?
}

model Layout {
  id          Int     @id @default(autoincrement())
  commonArea  Int
  buildArea   Int
  position    Int?
  description String?
  project     Project @relation(fields: [projectId], references: [id])
  projectId   Int
  layoutPhoto Photo[]
}

enum ProjectType {
  EXEMPLARY
  INDIVIDUAL
}

model Project {
  id                Int                @id @default(autoincrement())
  photos            Photo[]
  type              ProjectType
  portfolioProjects PortfolioProject[]
  floors            Int
  price             Int
  buildPrice        Int
  bedrooms          Int
  resources         Resource[]
  layouts           Layout[]
}

model PortfolioProject {
  id        Int     @id @default(autoincrement())
  photos    Photo[]
  address   String
  area      Int
  bedrooms  Int
  project   Project @relation(fields: [projectId], references: [id])
  projectId Int
}
